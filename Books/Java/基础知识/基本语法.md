# 变量的有效范围

- 由于变量被定义出来后，只是暂存在内存中，等到程序执行到某一个点后，该变量会被释放掉，也就是说变量有它的生命周期。因此变量的有效范围是指程序代码能够访问该变量的区域，若超出该区域访问变量则编译时会出现错误。在程序中，一般会根据变量的有效范围，将变量分为“成员变量”和“局部变量”。

### 成员变量

- Java中定义成员变量时采用合法的前向引用

在类体中所定义的变量被称为成员变量。成员变量在整个类中都有效，所以成员变量也称作全局变量。

成员变量的有效范围是整个类的代码段，也就是在类体中的任何位置都可以使用该变量。

声明成员变量，并在不同方法中为成员变量赋值

```
public class Temp{
        int num = 0;
        float price = 3.50f;
        public void method01(){
                num = 1;
                price = 12.55f;
        }
        public void method02(){
                num = num * 10;
                price = price * 0.5f;
        }
}
```

- 类的成员变量又可分为静态变量和实例变量两种。

#### 静态变量 static

- 静态变量的有效范围是整个类，并且可以被类的所有实例共享。可通过“类名.静态变量名”的方式来访问静态变量。
- 静态变量的生命周期取决于类的生命周期，当类被加载时，为类中的静态变量分配内存空间，当卸载类时，释放静态变量占用的空间，静态变量被销毁。
- 类加载时，就为静态变量分配内存空间，之后无论创建了多少类的实例，都不会再为静态变量分配内存空间，这些实例会使用同一个静态变量。

```
 static int y = 90;   //定义静态变量
```

#### 实例变量

- 实例变量与类的实例对应，它的有效范围是整个实例。
- 每创建一个类的实例，都会为当前实例分配实例变量的内存空间。
- 所以实例变量的生命周期取决于实例的生命周期，实例被创建时，为实例变量分配内存空间，当销毁实例时，释放实例变量占用的内存空间。

```
int x = 45;          //定义实例变量
```

### 局部变量

- 在方法体中定义的变量就是一种局部变量，局部变量只在当前代码块（即花括号之内）中有效。
- 局部变量的生命周期取决于声明位置的代码块，超出这个代码块的范围就不能在使用代码块内的局部变量。

就拿方法类说，方法内声明的变量、包括参数变量都属于局部变量，当方法被调用时，Java虚拟机为方法中的局部变量分配内存空间，当该方法的调用结束后，则会释放方法中局部变量占用的内存空间，局部变量也将会销毁，然后Java的垃圾回收机制会在某一时刻清理该内存空间。

![](C:/Users/zjk10/OneDrive/NoteBook/pictures/596674923239085.png)

#### 局部变量可与全局变量的名字相同，此时全局变量将被隐藏，但是可以使用“this.”做前缀来访问全局变量

```
public class ValClass{
        static String words = "成员变量";
        public static void main(String[] args){
                String words = "局部变量";
                System.out.println("words变量现在是:" + words); //局部变量
        }
}
```

***

# 运算符

## 算术运算符

<img src="../../../pictures/432854115221109.png" width="611"/>   

### 算术运算符的注意问题

#### 如果对负数取模，可以把模数负号忽略不记

- 如：5%-2=1。
- 但被模数是负数则不可忽略。
- 此外，取模运算的结果不一定总是整数。

#### 对于除号“/”，它的整数除和小数除是有区别的：整数之间做除法时，只保留整数部分而舍弃小数部分

- 例如：
- int x = 3510;
- x=x / 1000 * 1000;  
- x的结果是3

#### “+”除字符串相加功能外，还能把非字符串转换成字符串.例如

- System.out.println(“5+5=”+ 5 + 5); //打印结果是 5+5=55  //字符串

#### 自增1/自减1不会改变本身变量的数据类型

```
short s1

s1 = s1 +1 //编译失败
应该是
s1 = (short)(s1 +1);

整数默认是int
```

#### 超过范围的++

```
byte b1 = 127;
b1++;
System.out.println(b1);  //-128  
```

#### 自增2 (num++)++ //编译失败

```
num += 2;
```

### 练习1：除 转换

```
public class SignTest{
        public static void main(String[] args){
                int num01 = 12;
                int num02 = 5;

                int result01 = num01 / num02;
                System.out.println(result01);   //2

                int result02 = num01 / num02 * num02;
                System.out.println(result02);   //10

                double result03 = num01 / num02;
                System.out.println(result03);  //2.0

                double result04 = num01 / num02 + 0.0;
                System.out.println(result04);   //2.0

                double result05 = num01 / (num02 + 0.0);
                System.out.println(result05);   //2.4

                double result06 = (double)num01 / num02;
                System.out.println(result06);   //2.4

                double result07 = (double)(num01 / num02);
                System.out.println(result07);   //2.0
        }
}
```

### 练习2：随意给出一个整数，打印显示它的个位数，十位数，百位数的值

```
格式如下：
数字xxx的情况如下：
个位数：
十位数：
百位数：
例如：
数字153的情况如下：
个位数：3
十位数：5
百位数：1
```

```
public class NumberPrint{
        public static void main(String[] args){
                int num = 123;
                int a = num / 100;
                int b = (num % 100 ) / 10;
                int c = num % 10;
                System.out.println("数字" + num + "的情况如下:");
                System.out.println("百位数:" + a );
                System.out.println("十位数:" + b );
                System.out.println("个位数:" + c );
        }
}
```

### 练习3：算术运算符：自加、自减

```
public class SignTest{
        public static void main(String[] args){
                int i = 1;
                System.out.println("i\t" + i);
                System.out.println("i++\t" + (i++));
                i = 1;
                System.out.println("++i\t" + (++i));
                i = 1;
                System.out.println("i--\t" + (i--));
                i = 1;
                System.out.println("--i\t" + (--i));
        }
}

i       1
i++     1                                                                                                               ++i     2
i--     1
--i     0  
```

```
public class SignTest{
        public static void main(String[] args){
                int i1 = 10;
                int i2 = 20;
                int i = i1++;
                System.out.println("i=" + i); 
                System.out.println("i1=" + i1);
                i = ++i1;
                System.out.println("i=" + i);
                System.out.println("i1=" + i1);
                i = i2--;
                System.out.println("i=" + i);
                System.out.println("i2=" + i2);
                i = --i2;
                System.out.println("i=" + i);
                System.out.println("i2=" + i2);
        }
}

i=10
i1=11
i=12
i1=12
i=20
i2=19
i=18
i2=18;   
```

### 为抵抗洪水，战士连续作战89小时，编程计算共多少天零多少小时？

```
public class TimeCount{
        public static void main(String[] args){
                int workTime = 89;
                int day = workTime / 24;
                int hour = workTime % 24;

                System.out.println("共" + day + "天" + hour + "小时");
        }
}
```

### 今天是周二，100天以后是周几？

```
public class TimeCount{
        public static void main(String[] args){
                int days = 100;
                int weekday = days % 7 + 2;
                System.out.println("周" + weekday);
        }
}
```

### 总结

```
class SuanShu{
 public static void main(String[] args){
  int a = 23;
  int b = 12;
  System.out.println(a + "+" + b + "=" + (a+b));
  int sum = a + b;
  System.out.println(a + "+" + b + "=" + sum);
  
  int sub = a - b;
  //System.out.println(a + "-" + b + "=" + a-b);
  //错误，原因是a + "-" + b + "=" + a的结果是字符串，字符串不能进行减法
  System.out.println(a + "-" + b + "=" + (a-b));
  System.out.println(a + "-" + b + "=" + sub);
  
  int mul = a * b;
  System.out.println(a + "*" + b + "=" + a*b);
  System.out.println(a + "*" + b + "=" + mul);
  
  //整数相除，只保留整数部分
  int div = a / b;
  System.out.println(a + "/" + b + "=" + a/b);
  System.out.println(a + "/" + b + "=" + div);
  
  double d = (double)a/b;//先把a的类型进行转换，转换成double类型，然后再和b相除
  System.out.println(a + "/" + b + "=" + d);
  
  int yu = a % b;
  System.out.println(a + "%" + b + "=" + yu);
  
  System.out.println("------------------特殊的取模----------------------");
  System.out.println(5%2);//1
  System.out.println(-5%-2);//-1
  System.out.println(-5%2);//-1
  System.out.println(5%-2);//1
  
  System.out.println("------------------负号----------------------");
  int num1 = 12;
  int num2 = -num1;
  System.out.println("num2=" + num2);
  
  System.out.println("------------------自增----------------------");
  int i = 0;
  System.out.println("自增之前i=" + i);
  i++;
  System.out.println("自增第一次之后i=" + i);
  ++i;
  System.out.println("自增第二次之后i=" + i);
  int j = ++i;//把i自增1，然后结果赋值给j，或者说，先算++i，然后再赋值
  System.out.println("自增第三次之后i=" + i);
  System.out.println("j=" + j);
  int k = i++;//先算赋值，把i的值赋值给k，i原来是3，把3赋值给k，然后i在自增1，i变成4
  System.out.println("自增第四次之后i=" + i);
  System.out.println("k=" + k);
  
  //面试题：陷阱题
  i = i++;//先赋值，把i原来的值重新赋值给i，不变，然后i自增，但是这个自增后的值没有在放回变量i的位置
  System.out.println("自增第五次之后i=" + i);
 }
}

```

### 小明要到美国旅游，可是那里的温度是以华氏度为单位记录的。它需要一个程序将华氏温度（80度）转换为摄氏度，并以华氏度和摄氏度为单位分别显示该温度

<img src="../../../pictures/575720823220662.png" width="645"/>   

```
public class ChangeCF{
        public static void main(String[] args){
                double celsius;
                int fahrenheit = 80;

                celsius = (fahrenheit - 32) / 1.8;
                System.out.println("华氏度：" + fahrenheit);
                System.out.println("摄氏度：" + celsius);
        }
}
```

## 赋值运算符

符号：=
当“=”两侧数据类型不一致时，可以使用自动类型转换或使用强制类型转换原则进行处理。
支持连续赋值。

```
public class SetValueTest{
        public static void main(String[] args){
                int i,j;
                i = j = 1;
                System.out.println("i=" + i + "|" + "j=" + j);
        }
}

i=1|j=1
```

### 扩展赋值运算符： +=, -=, *=, /=, %=

#### 不会改变本身数据类型

而`s1 = s1 + 10` 改变//整数默认int

```
public class SetValueTest{
        public static void main(String[] args){
                int num;
                num = 10;
                num += 2;
                System.out.println(num);

                num = 10;
                num = num + 2;
                System.out.println(num);

                short s1 = 10;
                //s1 = s1 + 2; 编译失败
                s1 += 2;
                System.out.println(s1);
        }
}
```

### 思考1

```
short s = 3; 
s = s + 2; ① //编译失败
s += 2; ②
①和②有什么区别？
```

### 思考2

```
int i = 1;
i *= 0.1;
System.out.println(i); //0
i++;
System.out.println(i); //1
```

### 思考3

```
int m = 2;
int n = 3;
n *= m++;  //2 * 3 == 6
System.out.println("m=" + m); //3
System.out.println("n=" + n); //6
```

### 思考4：自增/自减的运算在同一行，运算不是全部按照原来的数一个个运算，而是按顺序在前面运算后的基础上运算

```
int n = 10;
n += (n++) + (++n);  //10 + 12 + 10 == 32
System.out.println(n);  //32
```

## 比较运算符（关系运算符）

- 比较运算符的结果都是boolean型，也就是要么是true，要么是false。
  - 不是0，1
- 比较运算符“==”不能误写成“=” 。
- ==  != 不仅能使用在数值类型之间，还可以使用在其他引用类型变量之间

```
Account acct1 = new Account(1000)

Account acct2 = new Account(1000)

boolean b1 = (acct1 == actt2) //比较两个Account是否是同一个账户 而不是有多少钱
//false
```

- `> < >= <=` 只能使用在数值类型的数据中之间

<img src="../../../pictures/371082210220660.png" width="772"/>   

### 思考1

```
boolean b1 = false;
//区分好==和=的区别。
if(b1==true){
    System.out.println("结果为真");
}
else{
    System.out.println("结果为假");
}
//结果为假

if(b1=true){    //有误，但编译通过
    System.out.println("结果为真");
}
else{
    System.out.println("结果为假");
}
//结果为假
```

***

## 逻辑运算符

- & —逻辑与
- | —逻辑或
- ！—逻辑非
- && —短路与
- || —短路或
- ^ —逻辑异或

<img src="../../../pictures/331722510239086.png" width="608"/>   

逻辑运算符用于连接布尔型表达式，在Java中不可以写成`3<x<6`，应该写成`x>3 & x<6`。

- "&”和“&&”的区别：
  - 单&时，左边无论真假，右边都进行运算；
  - 双&时，如果左边为真，右边参与运算，如果左边为假，那么右边不参与运算。
- "|”和“||”的区别同理，
  - ||表示：当左边为真，右边不参与运算。
- 异或( ^ )与或( | )的不同之处是：
  - 当左右都为true时，结果为false。
  - 理解：异或，追求的是“异”!

```
public class LogicTest{
        public static void main(String[] args){
                boolean b1 = true;
                int num1 = 10;
                if(b1 & (num1++ > 0)){
                        System.out.println("北京");
                }
                else{
                        System.out.println("南京");
                }
                System.out.println("num1=" + num1);

                boolean b2 = true;
                int num2 = 10;
                if(b2 && (num2++ > 0)){
                        System.out.println("北京");
                }
                else{
                        System.out.println("南京");
                }
                System.out.println("num2=" + num2);

                boolean b3 = false;
                int num3 = 10;
                if(b3 & (num3++ > 0)){
                        System.out.println("北京");
                }
                else{
                        System.out.println("南京");
                }
                System.out.println("num3=" + num3);

                boolean b4 = false;
                int num4 = 10;
                if(b4 && (num4++ > 0)){
                        System.out.println("北京");
                }
                else{
                        System.out.println("南京");
                }
                System.out.println("num4=" + num4);
        }
}

北京
num1=11
北京
num2=11
南京
num3=11
南京
num4=10 
```

### 练习：请写出每题的输出结果

#### 1

```
int x = 1;
int y = 1;
if(x++ == 2 & ++y == 2){
    x = 7;
}
System.out.println("x=" + x + ",y=" + y);  
//x=2,y=2
```

#### 2

```
int x = 1,y = 1;
if(x++ == 2 && ++y == 2){
    x = 7;
}
System.out.println("x=" + x + ",y=" + y);
//x=2,y=1
```

#### 3

```
int x = 1,y = 1;
if(x++ == 1 | ++y == 1){
    x = 7;
}
System.out.println("x=" + x + ",y=" + y);
//x=7,y=2
```

#### 4

```
int x = 1,y = 1;
if(x++ == 1 || ++y == 1){
    x = 7;
}
System.out.println("x=" + x + ",y=" + y);
//x=7,y=1
```

### 【面试题】程序输出

```
class Test {
    public static void main (String[] args) {
        boolean x = true;
        boolean y = false;
        short z = 42;
        //if(y == true)
        if((z++ == 42)&&(y = true)) z++; //z == 44;y == true
        if((x = false) || (++z == 45)) z++;  //x == false;z == 46
        
        System. out.println(“z=”+z);  
    }
}

结果为：z=46

```

***

## 位运算符

### 位运算是直接对整数的二进制进行的运算

- 位运算符操作的都是整型的数据
- 注意数据类型的长度
  <img src="../../../pictures/310843610226953.png" width="625"/>   

<img src="../../../pictures/257723710239788.png" width="602"/>   

```
public class BitTest{
        public static void main(String[] args){
                byte num = 2;
                System.out.println("num << 8 = " + (num << 8));
        }
}

num << 8 = 512 ???
```

### <<  乘2的n次方

- 在范围内，`<< n`即`乘2的n次方`
- 超过范围，负数...

```
public class BitTest{
        public static void main(String[] args){
                int i = 21;

                System.out.println("i << 2 :" + (i << 2));
                System.out.println("i << 27 :" + (i << 27));
        }
}

i << 2 :84
i << 27 :-1476395008
```

#### 最高效计算2*8

- 注：乘数中要有一个是2的倍数

```
public class BitTest{
        public static void main(String[] args){
                int num = 2;
                System.out.println("2 * 8 = "+ (num << 3));
        }
}

public class BitTest{
    public static void main(String[] args){
        System.out.println("2 * 8 = " + (8 << 1));
    }
}
```

### >> 除以2的n次方

- 在范围内，`>>n`即`除以2的n次方`

### >>>

### & 有0则0，都1则1

```
public class BitTest{
        public static void main(String[] args){
                System.out.println(2 & 5);
        }
}
//0

//2  ...010
//5  ...101
//...000
```

### | 有1则1，都0则0

```
public class BitTest{
        public static void main(String[] args){
                System.out.println(2 | 5);
        }
}
//7

//2  ...010
//5  ...101
//..111
```

### ^ 不同则1，同则0

```
public class BitTest{
        public static void main(String[] args){
                System.out.println(2 ^ 5);
        }
}
//7
//2  ...010
//5  ...101
//...111
```

```
public class BitTest{
        public static void main(String[] args){
                System.out.println(1 ^ 5);
                System.out.println(1 | 5);
        }
}
// ^ ...100 //4
// | ...101 //5

//1  ...001
//5  ...101

```

### ~ 取反

```
public class BitTest{
        public static void main(String[] args){
                System.out.println(~6);
        }
}
//-7
```

<img src="../../../pictures/485374314239086.png" width="585"/>   

### 如何求一个0~255范围内的整数的十六进制值，例如60的十六进制表示形式3C

```
//方式一：自动实现
public class BitTest{
        public static void main(String[] args){
                String str1 = Integer.toBinaryString(60);
                String str2 = Integer.toHexString(60);

                System.out.println(str1);
                System.out.println(str2);
        }
}

//方式二：手动实现
public class BitTest{
        public static void main(String[] args){
            int i1 = 60;      //0111100
            int i2 = i1 & 15; //0001111
            String j = (i2 > 9)? (char)(i2-10 + 'A')+"" : i2+"";
            int temp = i1 >>> 4;
            i2 = temp & 15;
            String k = (i2 > 9)? (char)(i2-10 + 'A')+"" : i2+"";
            System.out.println(k+""+j);
        }
}

```

### 练习 交换两个变量的值

```
public class ExchangeNum{
        public static void main(String[] args){
                int num01 = 10;
                int num02 = 20;

                //方法1  定义临时变量
                int temp;
                temp = num01;
                num01 = num02;
                num02 = temp;
                System.out.println("num01=" + num01);
                System.out.println("num02=" + num02);
                
                //方法2  不用定义临时变量;但是可能超过数据范围;有局限性,只能是数值型
                num01 = num01 + num02;
                num02 = num01 - num02;
                num01 = num01 - num02;
                System.out.println("num01=" + num01);
                System.out.println("num02=" + num02);
                
                //方法3 ^ 不用定义临时变量;但是可能超过数据范围;有局限性,只能是数值型
                num01 = (num01 ^ num02);
                num02 = (num01 ^ num02);
                num01 = (num01 ^ num02);
                System.out.println("num01=" + num01);
                System.out.println("num02=" + num02);

        }
}
```

### 错误 实现加法 sum = (num01 ^ num02) | num01 | num02 错误

```
public class AddNum{
        public static void main(String[] args){
                int num01 = 12;
                int num02 = 20;
                int sum;

                sum = (num01 ^ num02) | num01 | num02;
                System.out.println("sum=" + sum);
        }
}

//32
/*
num01 ^ num02
...01100 ^ 
...10100  == ...11000

(num01 ^ num02) | num01 | num02
...11000 |
...01100 == 
...11100 |
...10100 == ...11100
*/
```

### 实现减法

```
/*
num01 ^ num02
...01100 ^ 
...10100  == ...11000

*/
```

### 实现乘法

```

```

### 实现除法

```

```

## 三元运算符

```
条件表达式 ? 表达式1 ：表达式2；
```

- 条件表达式的结果为boolean类型
- 条件表达式为true，运算后的结果是表达式1；
- 条件表达式为false，运算后的结果是表达式2；  
- 表达式1和表达式2为要求是同种类型, 或者可以自动转换的， **会自动将类型转换为最高的一个** 。

```java
public class SanYuan{
        public static void main(String[] args){
                int m = 12;
                int n = 5;

                int max = (m > n)? m : n;
                System.out.println(max);
                
                double num = (m > n)? 1 : 1.0;
                System.out.println(num);
                
                //(m > n)? 1:"你好"; //无法自动转换，类型不统一//编译错误
                
                String maxStr = (m > n)? "m大":"n大";
                System.out.println(maxStr);
                
                int max = (((m > n)? m : n) == m)? m : n;
                System.out.println(maxNum);
        }
}
```

### 三元运算符与if-else的联系与区别

1. 三元运算符可简化if-else语句,优先三元运算符
2. 三元运算符要求必须返回一个结果。
3. if后的代码块可有多个语句

## 运算符的优先级

运算符有不同的优先级，所谓优先级就是表达式运算中的运算顺序。如表，上一行运算符总优先于下一行。

<img src="../../../pictures/433304110226324.png" width="378"/>   

只有单目运算符、三元运算符、赋值运算符是从右向左运算的。
