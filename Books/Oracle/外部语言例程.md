# 外部语言例程

# Java

- javasyspriv权限和javauserpriv权限。
- Oracle调用Java类的必须是静态公有方法。
- 将Java方法的返回值作为查询的数据。

## Oracle内部创建Java语句

1. 在SQLPlus中创建Oracle中的Java类与方法

```sql
create or replace and compile java source named 函数名 as
public class 类名{
    public static 返回值 方法名(参数列表){}
}
```

```sql
create or replace and compile java source named hello as
public class Hello{
       public static String say(String name){
              return "Hello " + name;
       }
}
```

2. 创建函数调用载入Oracle中的Java方法

```sql
create or replace function hello (name varchar2)
return varchar2
as 
language java name 'Hello.say(java.lang.String) return java.lang.String';
```

3. 通过创建的函数来调用Java程序

```sql
select hello(user) 
from dual;
```

## 导入外部Java类

1. 创建要调用的Java代码，并编译成 **Class文件** ，需要先javac
2. loadjava命令在控制台上将class文件加载到Oracle环境中

```shell
loadjava -u sys/sys@orcl -oci8 -verbose -grant scott -synonym -resolve -schema scott class文件路径
```

- 卸载已经加载的Java代码

```shell
dropjava -user sys/sys@orcl 类名
```

3. 通过创建的函数来调用Java程序