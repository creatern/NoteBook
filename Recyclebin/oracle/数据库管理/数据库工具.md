# wallet

1.修改参数文件sqlnet.ora：位于admin文件夹下，添加如下。

```
ENCRYPTION_WALLET_LOCATION=
(SOURCE=(METHOD=FILE)
       (METHOD_DATA=
        (DIRECTORY=F:\ORA_WALLET))) --路径文件夹(目录DIRECTORY)
```

2.设置钱包密码

```sql
ALTER SYSTEM 
SET ENCRYPTION KEY AUTHENTICATED BY "tiger";
```

3.使用钱包

```sql
CREATE TABLESPACE secertspace
DATAFILE 'F:\NEWDB\ZDB\userdb01' 
SIZE 200M
ENCRYPTION USING 'AES128'
DEFAULT STORAGE(ENCRYPT);
```

4.配置自动打开钱包（可选）

# 数据泵

<https://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_import.htm#SUTIL300>

<https://www.cnblogs.com/Jingkunliu/p/13705626.html>
<https://www.cnblogs.com/ggykx/p/11856404.html>
<https://blog.csdn.net/zhyp29/article/details/84854882>

<https://www.cnblogs.com/tinazzz/p/9708062.html>

## 导出（复制）

```
sql>
CREATE USER tuser;
GRANT exp_full_database TO tuser;

CREATE DIRECTORY dmp_dir AS 'f:\dump';
GRANT READ, WRITE ON DIRECTORY TO tuser;

os>
在操作系统相同位置创建f:\dump文件夹

cmd> 注：没有分号 ;
```

```
1.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=fulldb.dmp FULL=Y
2.
expdp tuser DIRECTORY=dmp01_dir DUMPFILE=userdum.dmp SCHEMAS=scott,system
3.
expdp tuser DIRECTORY='dmp02_dir' DUMPFILE=DUMPtable.dmp TABLES=emp,tuser.info,kk.sales:sales_P2
4.
expdp tuser DIRECTORY=dmp01_dir DUMPFILE=userdum01.dmp SCHEMAS=tuser.info
5.
expdp tuser DIRECTORY='dmp_dir' DUMPFILE='dumptablespace.dmp' TABLESPACEs=tbs1,tbs2;
6.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser_comp.dmp COMPRESSION=METADATA_ONLY
7.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser_dump01.dmp CONTENT=ALL
8.  注：若要导出多个.dmp文件到文件夹，需要创建DIRECTORY对象如：dump_dir001
    %U 多个.dmp文件
sql>
CREATE DIRECTORY dmp_dir001 AS 'F:\dump\dumpdir'
os>
在操作系统相同位置创建f:\dump\dumpdir文件夹
cmd>
expdp tuser SCHEMAS=tuser DIRECTORY=dmp_dir DUMPFILE=dum_dir001:exp1.dump, exp2%U.dmp
9.
expdp tuser SCHEMAS=tuser DIRECTORY=dmp_dir DUMPFILE=tuser1_enc.dmp JOB_NAME=enc1 ENCRYPTION=DATA_ONLY ENCRYPTION_PASSWORD=cooboy
10. LRM-00116: ')'后跟 'DD-MM-YYYY HH24:' 时出现语法错误
expdp tuser ESTIMATE_ONLY=Y SCHEMAS=tuser
注 接下来的两种若之前以及使用，需要到路径删除相关的文件才能再次使用
expdp tuser ESTIMATE=BLOCKS SCHEMAS=tuser
expdp tuser ESTIMATE=STATISTICS SCHEMAS=tuser
11.
expdp tuser DIRECTORY=dmp_dir DUMPFILE='dump_ex.dmp' EXCLUDE=VIEW, FUNCTION
12.  https://www.cnblogs.com/daduxiong/archive/2010/08/19/1803764.html
expdp tuser DIRECTORY=dmp_dir DUMPFILE='dump_scn.dmp' FLASHBACK_SCN=25443
13.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser_scn.dmp FLASHBACK_TIME="TO_TIMESTAMP('07-06-2022 20:00:00', 'DD-MM-YYYY HH24:MI:SS')"
注 LRM-00116 : syntax error at 'DD-MM-YYYY HH24:' following ')'
原因 Escape the double quotation marks by \, or put the flashback_time to parfile.
     The " characters are needed by the expdp, and without escaping them, they are eaten by the shell/command.com.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser_scn.dmp FLASHBACK_TIME=\"TO_TIMESTAMP('07-06-2022 20:00:00', 'DD-MM-YYYY HH24:MI:SS')\"
14.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=include_tuser.dmp INCLUDE=TABLE:\"IN ('EPM','DEPARTMENTS')\"
15.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=job_name_tuser.dmp JOB_NAME=exp_job
16.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser.dmp LOG_FILE=tuser_export.log
17.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=network_dump.dmp NETWORK_LINK=指定数据库链接 LOGFILE=tuser_log.log
18.
os>
新建文件 C:\Users\10548\Desktop\pkk.txt
DIRECTORY=dmp_dir
DUMPFILE=tuser_test01.dmp
TABLES=info,tvb
cmd>
expdp PARFILE='C:\Users\10548\Desktop\pkk.txt'
19.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=dump_query.dmp QUERY=employees:"WHERE employee_id > 10 AND salary > 1000"
20.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=dump_query.dmp QUERY=employees:"WHERE employee_id > 10 AND salary > 1000" REUSE_DUMPFILES=Y
21.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser.dmp SAMPLE=20 REUSE_DUMPFILES=Y
22.
expdp tuser DIRECTORY=dmp_dir SCHEMAS=tuser STATUS=400
23.
expdp tuser DIRECTORY=dmp_dir DUMPFILE=tuser_tt.dmp TABLES=tuser.info TRANSPORTABLE=always
注 ORA-29335: 表空间 'USERS' 不为只读
   https://www.cnblogs.com/java-home/archive/2012/04/26/2641193.html
impdp SYSTEM DIRECTOR=dir_dmp DUMPFILE=tuser_tt.dmp TRANSPORT_DATAFILES='D:\U01.dmnp'
```

## 交互式接口 Ctrl+c

### Export

```
1.
Export> START_JOB
ORA-39004: 状态无效
ORA-39016: 当作业处于 EXECUTING 状态时不支持该操作。

Export> exit_client

UDE-31623: 操作产生了 ORACLE 错误 31623
ORA-31623: 作业没有通过指定的句柄连接到此会话
ORA-06512: 在 "SYS.DBMS_SYS_ERROR", line 79
ORA-06512: 在 "SYS.DBMS_DATAPUMP", line 1137
ORA-06512: 在 "SYS.DBMS_DATAPUMP", line 4583
ORA-06512: 在 line 1

应该是
CONTINUE_CLIENT
```

### Import

```
impdp
1.
impdp system DIRECTORY=imp_dir DUMPFILE=FULLDB.dmp --之前创建的导出文件
2.
impdp system DIRECTORY=dmp_dir DUMPFILE=ORCL_FULL_.dmp REUSE_DATAFILES=N TABLE_EXISTS_ACTION=SKIP
UDI-31626: 操作产生了 ORACLE 错误 31626
ORA-31626: 作业不存在
ORA-39086: 无法检索作业信息
ORA-06512: 在 "SYS.DBMS_DATAPUMP", line 3263
ORA-06512: 在 "SYS.DBMS_DATAPUMP", line 4488
ORA-06512: 在 line 1
https://blog.csdn.net/csdnhsh/article/details/95800277
```

# ODBC

- 安装ODBC：

1. 先下载相应的ODBC。
2. 打开控制面板，“管理工具→ODBC数据源（32位）”打开ODBC数据源配置对话框。
3. 在数据源配置对话框中单击“系统DSN”选项卡下的“添加”按钮，创建数据源。

---数据源名称
---描述
---用户名