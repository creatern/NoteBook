<!DOCTYPE html>
<!-- saved from url=(0095)https://www.cnblogs.com/littleatp/p/11675233.html#%E4%B8%89%E6%93%8D%E4%BD%9C%E8%AF%AD%E6%B3%95 -->
<html lang="zh-cn" style="--olcb-folder-code-block-max-height: 80vh; --cnb-code-bg: rgb(245, 245, 245); --cnb-code-font-size: 12px; --cnb-code-color: rgb(68, 68, 68);"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin-when-cross-origin">
    <meta name="description" content="[TOC] 一、简介 MongoDB 是一款流行的开源文档型数据库，从它的命名来看，确实是有一定野心的。 MongoDB 的原名一开始 来自于 英文单词&amp;quot;Humongous&amp;quot;, 中文含义是指&amp;quot;庞大&amp;quot; ，即命名者的意图是可以处理大规模的数据。 但笔者更喜欢称呼它">
    <meta property="og:description" content="[TOC] 一、简介 MongoDB 是一款流行的开源文档型数据库，从它的命名来看，确实是有一定野心的。 MongoDB 的原名一开始 来自于 英文单词&amp;quot;Humongous&amp;quot;, 中文含义是指&amp;quot;庞大&amp;quot; ，即命名者的意图是可以处理大规模的数据。 但笔者更喜欢称呼它">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>了解 MongoDB 看这一篇就够了 - 美码师 - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="https://common.cnblogs.com/favicon.svg" type="image/svg+xml">
    
    <style>#home :not(.cnblogs_code):not(.cnblogs_Highlighter)>pre:not([highlighted]):not([class*="brush:"]) code:not(.hljs), :not(.cnblogs_code):not(.cnblogs_Highlighter)>pre:not([highlighted]):not([class*="brush:"]) code:not(.hljs) {background: rgb(245, 245, 245);
        padding: 12px;
        border: 1px solid rgb(204, 204, 204);
        border-radius: 3px;
        border-color: transparent;
        color: rgb(68, 68, 68);
        font-family: "Courier New", sans-serif;
        font-size: 12px</style><link rel="stylesheet" href="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/blog-common.min.css">
    

    <link id="MainCss" rel="stylesheet" href="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/bundle-lessismoreright.min.css">
        <link id="highlighter-theme-cnblogs" type="text/css" rel="stylesheet" href="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/cnblogs.css">
    <link type="text/css" rel="stylesheet" href="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/custom.css">
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/bundle-lessismoreright-mobile.min.css">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/littleatp/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/littleatp/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/littleatp/wlwmanifest.xml">
    <script>
        var currentBlogId = 129222;
        var currentBlogApp = 'littleatp';
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'LessIsMoreRight';
        var visitorUserId = '';
        var hasCustomScript = true;
        window.cb_enable_mathjax = false;
        window.mathEngine = 0;
        window.codeHighlightEngine = 1;
        window.enableCodeLineNumber = false;
        window.codeHighlightTheme = 'cnblogs';
        window.darkModeCodeHighlightTheme = 'vs2015';
        window.isDarkCodeHighlightTheme = false;
        window.isDarkModeCodeHighlightThemeDark = true;
        window.isDisableCodeHighlighter = false;
        window.enableCodeThemeTypeFollowSystem = false;
        window.enableMacStyleCodeBlock = false;
    </script>
        <script>
            window.currentPostId = 11675233;
            window.currentPostDateAdded = '2019-10-15 07:40';
        </script>
    <script src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/jquery-2.2.0.min.js"></script>
    <script src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/blog-common.min.js"></script><style>.medium-zoom-overlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  opacity: 0;
  transition: opacity 300ms;
  will-change: opacity;
}

.medium-zoom--opened .medium-zoom-overlay {
  cursor: pointer;
  cursor: zoom-out;
  opacity: 1;
}

.medium-zoom-image {
  cursor: pointer;
  cursor: zoom-in;
  /*
    The `transition` is marked as "!important" for the animation to happen
    even though it's overriden by another inline `transition` style attribute.

    This is problematic with frameworks that generate inline styles on their
    images (e.g. Gatsby).

    See https://github.com/francoischalifour/medium-zoom/issues/110
   */
  transition: transform 300ms cubic-bezier(0.2, 0, 0.2, 1) !important;
}

.medium-zoom-image--hidden {
  visibility: hidden;
}

.medium-zoom-image--opened {
  position: relative;
  cursor: pointer;
  cursor: zoom-out;
  will-change: transform;
}
</style><script id="hljs-script" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/highlight.min.js" type="text/javascript" async=""></script>
        <script>updateCustomBlogReferrer();</script>
    

    
<meta property="og:image" content="https://img2018.cnblogs.com/blog/242916/201910/242916-20191013234822169-1254227887.png"></head>
<body class="skin-lessismoreright no-navbar hljs-engine">
    <a name="top"></a>
    <div id="top_nav" class="navbar forpc navbar-custom">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding">
                    <a href="https://www.cnblogs.com/" title="开发者的网上家园" role="banner">
                        <img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/logo.svg" alt="博客园Logo">
                    </a>
                </li>
                <li>
                    <a href="https://www.cnblogs.com/" onclick="countClicks(&#39;skin-navbar-sitehome&#39;)">首页</a>
                </li>
                <li>
                    <a href="https://news.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-news&#39;)">新闻</a>
                </li>
                <li>
                    <a href="https://q.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-q&#39;)">博问</a>
                </li>
                <li><a href="https://cnblogs.vip/">会员</a></li>
                <li>
                    <a href="https://ing.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-ing&#39;)">闪存</a>
                </li>
                <li>
                    <a href="https://edu.cnblogs.com/" onclick="countClicks(&#39;nav&#39;, &#39;skin-navbar-edu&#39;)">班级</a>
                </li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search dropdown" action="https://zzk.cnblogs.com/s" method="get" role="search">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="search" tabindex="3" autocomplete="off">
                        <button id="zzk_search_button" onclick="window.navbarSearchManager.triggerActiveOption()">
                            <img id="search_icon" class="focus-hidden" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/search.svg" alt="搜索">
                            <img class="hidden focus-visible" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/enter.svg" alt="搜索">
                        </button>
                        <ul id="navbar_search_options" class="dropdown-menu quick-search-menu">
                            <li tabindex="0" class="active" onclick="zzkSearch(event, document.getElementById(&#39;zzk_search_input&#39;).value)">
                                <div class="keyword-wrapper">
                                    <img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/search.svg" alt="搜索">
                                    <div class="keyword"></div>
                                </div>
                                <span class="search-area">所有博客</span>
                            </li>
                                    <li tabindex="1" onclick="zzkBlogSearch(event, &#39;littleatp&#39;, document.getElementById(&#39;zzk_search_input&#39;).value)">
                                        <div class="keyword-wrapper">
                                            <img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/search.svg" alt="搜索">
                                            <div class="keyword"></div>
                                        </div>
                                        <span class="search-area">当前博客</span>
                                    </li>
                        </ul>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a class="navbar-user-info navbar-blog" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔" title="写随笔" style="display: none;">
                        <img id="new_post_icon" class="navbar-icon" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/newpost.svg" alt="写随笔">
                    </a>
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客" style="display: none;">
                        <img id="myblog_icon" class="navbar-icon" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/myblog.svg" alt="我的博客">
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息" style="display: none;">
                        <img id="msg_icon" class="navbar-icon" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/message.svg" alt="短消息">
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <a id="navbar_lite_mode_indicator" data-current-page="blog" style="display: none" href="javascript:void(0)" alt="简洁模式" title="简洁模式启用，您在访问他人博客时会使用简洁款皮肤展示">
                        <img class="navbar-icon" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/lite-mode-on.svg" alt="简洁模式">
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown" style="display: none;">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/avatar-default.svg" alt="用户头像">
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
    简洁模式 <img id="navbar_lite_mode_on" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/lite-mode-check.svg" class="hide" style="display: none;"><span id="navbar_lite_mode_spinner" class="hide">...</span>
</a>
                            <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup" style="display: inline;">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()" style="display: inline;">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    

    <div id="home">
    <div id="header">
        <div id="blogTitle">
            <div class="title"><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/littleatp/">美码师</a>
</div>
<div class="subtitle">写得一手好代码，还要下得了厨房，当技术发现美，生活也可以是诗和远方</div>

        </div>
        <div id="navigator">
            
<ul id="navList">
    <li id="nav_sitehome"><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
    <li id="nav_myhome">
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/littleatp/">
首页</a>
</li>
    <li id="nav_newpost">

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
    <li id="nav_contact">
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E7%BE%8E%E7%A0%81%E5%B8%88">
联系</a></li>
    <li id="nav_rss">
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/littleatp/rss/">
订阅</a></li>
    <li id="nav_admin">
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>

            <div class="blogStats">
                
<span id="stats_post_count">随笔 - 122&nbsp;</span>
<span id="stats_article_count">文章 - 0&nbsp;</span>
<span id="stats_comment_count">评论 - 220&nbsp;</span>
<span id="stats_total_view_count">阅读 - 
<span title="总阅读数: 949268">
94万</span></span>
            </div>
        </div>
    </div>
    <div id="main">
        <div id="mainContent">
            <div class="forFlow">
                <div id="post_detail">
    <div id="topics">
        <div class="post">
            <h1 class="postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/littleatp/p/11675233.html">
    <span role="heading" aria-level="2">了解 MongoDB 看这一篇就够了</span>
    



</a><button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E4%B8%80%E7%AE%80%E4%BB%8B" rel="noopener">一、简介</a></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E4%BA%8C%E5%9F%BA%E6%9C%AC%E6%A8%A1%E5%9E%8B" rel="noopener">二、基本模型</a><ul><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#bson-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="noopener">BSON 数据类型</a></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E5%88%86%E5%B8%83%E5%BC%8Fid" rel="noopener">分布式ID</a></li></ul></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E4%B8%89%E6%93%8D%E4%BD%9C%E8%AF%AD%E6%B3%95" rel="noopener">三、操作语法</a></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E5%9B%9B%E7%B4%A2%E5%BC%95" rel="noopener">四、索引</a><ul><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E7%B4%A2%E5%BC%95%E7%89%B9%E6%80%A7" rel="noopener">索引特性</a></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB" rel="noopener">索引分类</a></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E7%B4%A2%E5%BC%95%E8%AF%84%E4%BC%B0%E8%B0%83%E4%BC%98" rel="noopener">索引评估、调优</a></li></ul></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E4%BA%94%E9%9B%86%E7%BE%A4" rel="noopener">五、集群</a><ul><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E5%88%86%E7%89%87%E6%9C%BA%E5%88%B6" rel="noopener">分片机制</a></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E5%89%AF%E6%9C%AC%E9%9B%86" rel="noopener">副本集</a></li></ul></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E5%85%AD%E4%BA%8B%E5%8A%A1%E4%B8%8E%E4%B8%80%E8%87%B4%E6%80%A7" rel="noopener">六、事务与一致性</a><ul><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E4%B8%80%E8%87%B4%E6%80%A7" rel="noopener">一致性</a></li></ul></li><li><a href="https://www.cnblogs.com/littleatp/p/11675233.html#%E5%B0%8F%E7%BB%93" rel="noopener">小结</a></li></ul></div><p></p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013234822169-1254227887.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<h2 id="一简介">一、简介<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>MongoDB 是一款流行的开源文档型数据库，从它的命名来看，确实是有一定野心的。<br>
MongoDB 的原名一开始<strong>来自于 英文单词"Humongous", 中文含义是指"庞大"</strong>，即命名者的意图是可以处理大规模的数据。</p>
<p>但笔者更喜欢称呼它为 "芒果"数据库，除了译音更加相近之外，原因还来自于这几年使用 MongoDB 的两层感觉：</p>
<ul>
<li>
<p>第一层感受是"爽"，使用这个文档数据库的特点是几乎不受什么限制，一方面Json文档式的结构更容易理解，而无Schema约束也让DDL管理更加简单，一切都可以很快速的进行。</p>
</li>
<li>
<p>第二层感受是"酸爽"，这点相信干运维或是支撑性工作的兄弟感受会比较深刻，MongoDB 由于入门体验"太过于友好"，导致一些团队认为用好这个数据库是个很简单的事情，所以开发兄弟在存量系统上埋一些坑也是正常的事情。<br>
所谓交付一时爽，维护火葬场.. 当然了，这句话可能有些过。 但这里的潜台词是：与传统的RDBMS数据库一样，MongoDB 在使用上也需要认真的考量和看护，不然的化，会遇到更多的坑。</p>
</li>
</ul>
<p>那么，尽管文档数据库在选型上会让一些团队望而却步，仍然不阻碍该数据库所获得的一些支持，比如 DB-Engine 上的排名：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235025745-527250473.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图-DBEngine排名</p>
<p>在全部的排名中，MongoDB 长期排在第5位(文档数据库排名第1位)，同时也是最受欢迎的 NoSQL 数据库。<br>
另外，MongoDB 的社区一直比较活跃，加上商业上的驱动(MongoDB于2017年在纳斯达克上市)，这些因素都推动了该开源数据库的发展。</p>
<p>如果对于 MongoDB的发展史感兴趣，可以参考下<a href="https://www.infoq.cn/article/XBME_sTIRA5fA8NDCaGj" target="_blank" rel="noopener">没有一个技术天生完美，MongoDB 十年发展全纪录</a>这篇文章。</p>
<p>MongoDB 数据库的一些特性：</p>
<ul>
<li>面向文档存储，基于JSON/BSON 可表示灵活的数据结构</li>
<li>动态 DDL能力，没有强Schema约束，支持快速迭代</li>
<li>高性能计算，提供基于内存的快速数据查询</li>
<li>容易扩展，利用数据分片可以支持海量数据存储</li>
<li>丰富的功能集，支持二级索引、强大的聚合管道功能，为开发者量身定做的功能，如数据自动老化、固定集合等等。</li>
<li>跨平台版本、支持多语言SDK..</li>
</ul>
<p>假定你是初次了解 MongoDB，下面的内容将能帮助你对该数据库技术的全貌产生一定的了解。</p>
<h2 id="二基本模型">二、基本模型<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>数据结构对于一个软件来说是至关重要的，MongoDB 在概念模型上参考了 SQL数据库，但并非完全相同。</p>
<blockquote>
<p>关于这点，也有人说，MongoDB 是 NoSQL中最像SQL的数据库..</p>
</blockquote>
<p>如下表所示：</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>SQL概念</th>
<th>MongoDB概念</th>
</tr>
</thead>
<tbody>
<tr>
<td>database</td>
<td>database</td>
</tr>
<tr>
<td>table</td>
<td>collection</td>
</tr>
<tr>
<td>row</td>
<td>document</td>
</tr>
<tr>
<td>column</td>
<td>field</td>
</tr>
</tbody>
</table></div>
<ul>
<li>database 数据库，与SQL的数据库(database)概念相同，一个数据库包含多个集合(表)</li>
<li>collection 集合，相当于SQL中的表(table)，一个集合可以存放多个文档(行)。 不同之处就在于集合的结构(schema)是动态的，不需要预先声明一个严格的表结构。更重要的是，默认情况下 MongoDB 并不会对写入的数据做任何schema的校验。</li>
<li>document 文档，相当于SQL中的行(row)，一个文档由多个字段(列)组成，并采用bson(json)格式表示。</li>
<li>field 字段，相当于SQL中的列(column)，相比普通column的差别在于field的类型可以更加灵活，比如支持嵌套的文档、数组。<br>
此外，MongoDB中字段的类型是固定的、区分大小写、并且文档中的字段也是有序的。</li>
</ul>
<p>另外，SQL 还有一些其他的概念，对应关系如下：</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>SQL概念</th>
<th>MongoDB概念</th>
</tr>
</thead>
<tbody>
<tr>
<td>primary key</td>
<td>_id</td>
</tr>
<tr>
<td>foreign key</td>
<td>reference</td>
</tr>
<tr>
<td>view</td>
<td>view</td>
</tr>
<tr>
<td>index</td>
<td>index</td>
</tr>
<tr>
<td>join</td>
<td>$lookup</td>
</tr>
<tr>
<td>transaction</td>
<td>trasaction</td>
</tr>
<tr>
<td>group by</td>
<td>aggregation</td>
</tr>
</tbody>
</table></div>
<ul>
<li>_id 主键，MongoDB 默认使用一个_id 字段来保证文档的唯一性。</li>
<li>reference 引用，勉强可以对应于 外键(foreign key) 的概念，之所以是勉强是因为 reference 并没有实现任何外键的约束，而只是由客户端(driver)自动进行关联查询、转换的一个特殊类型。</li>
<li>view 视图，MongoDB 3.4 开始支持视图，和 SQL 的视图没有什么差异，视图是基于表/集合之上进行动态查询的一层对象，可以是虚拟的，也可以是物理的(物化视图)。</li>
<li>index 索引，与SQL 的索引相同。</li>
<li>$lookup，这是一个聚合操作符，可以用于实现类似 SQL-join 连接的功能</li>
<li>transaction 事务，从 MongoDB 4.0 版本开始，提供了对于事务的支持</li>
<li>aggregation 聚合，MongoDB 提供了强大的聚合计算框架，group by 是其中的一类聚合操作。</li>
</ul>
<h3 id="bson-数据类型">BSON 数据类型<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>MongoDB 文档可以使用 Javascript 对象表示，从格式上讲，是基于 JSON 的。</p>
<p>一个典型的文档如下：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"first"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"John"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"last"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"Backus"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"contribs"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">"Fortran"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ALGOL"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Backus-Naur Form"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"FP"</span> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"awards"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"award"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"W.W. McDowell Award"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"year"</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1967</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"by"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"IEEE Computer Society"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"award"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"Draper Prize"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"year"</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1993</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"by"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"National Academy of Engineering"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>曾经，JSON 的出现及流行让 Web 2.0 的数据传输变得非常简单，所以使用 JSON 语法是非常容易让开发者接受的。<br>
但是 JSON 也有自己的短板，比如无法支持像日期这样的特定数据类型，因此 MongoDB 实际上使用的是一种扩展式的JSON，叫 BSON(Binary JSON)。</p>
<p>BSON 所支持的数据类型包括：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235044329-1532573800.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图-BSON类型</p>
<h3 id="分布式id">分布式ID<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>在单机时代，大多数应用可以使用数据库自增式ID 来作为主键。 传统的 RDBMS 也都支持这种方式，比如 mysql 可以通过声明 auto_increment来实现自增的主键。 但一旦数据实现了分布式存储，这种方式就不再适用了，原因就在于无法保证多个节点上的主键不出现重复。</p>
<p>为了实现分布式数据ID的唯一性保证，应用开发者提出了自己的方案，而大多数方案中都会将ID分段生成，如著名的 snowflake 算法中就同时使用了时间戳、机器号、进程号以及随机数来保证唯一性。</p>
<p>MongoDB 采用 ObjectId 来表示主键的类型，数据库中每个文档都拥有一个_id 字段表示主键。<br>
_id 的生成规则如下：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235053613-434845396.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图-ObjecteID</p>
<p>其中包括：</p>
<ul>
<li>4-byte Unix 时间戳</li>
<li>3-byte 机器 ID</li>
<li>2-byte 进程 ID</li>
<li>3-byte 计数器(初始化随机)</li>
</ul>
<p>值得一提的是 _id 的生成实质上是由客户端(Driver)生成的，这样可以获得更好的随机性，同时降低服务端的负载。<br>
当然服务端也会检测写入的文档是否包含_id 字段，如果没有就生成一个。</p>
<h2 id="三操作语法">三、操作语法<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>除了文档模型本身，对于数据的操作命令也是基于JSON/BSON 格式的语法。</p>
<p>比如插入文档的操作：</p>
<pre class="highlighter-hljs" highlighted="true" has-selection="true"><code class="highlighter-hljs hljs language-css">db<span class="hljs-selector-class">.book</span><span class="hljs-selector-class">.insert</span>(
{
  title: <span class="hljs-string">"My first blog post"</span>,
  published: new <span class="hljs-built_in">Date</span>(),
  tags: [ <span class="hljs-string">"NoSQL"</span>, <span class="hljs-string">"MongoDB"</span> ],
  type: <span class="hljs-string">"Work"</span>,
  author : <span class="hljs-string">"James"</span>,
  viewCount: <span class="hljs-number">25</span>,
  commentCount: <span class="hljs-number">2</span>
}
)

</code></pre>
<p>执行文档查找：</p>
<pre class="highlighter-hljs" highlighted="true" has-selection="true"><code class="highlighter-hljs hljs language-css">db<span class="hljs-selector-class">.book</span><span class="hljs-selector-class">.find</span>({author : <span class="hljs-string">"James"</span>})
</code></pre>
<p>更新文档的命令：</p>
<pre class="highlighter-hljs" highlighted="true" has-selection="true"><code class="highlighter-hljs hljs language-bash">db.book.update(
   {<span class="hljs-string">"_id"</span> : ObjectId(<span class="hljs-string">"5c61301c15338f68639e6802"</span>)},
   {<span class="hljs-string">"<span class="hljs-variable">$inc</span>"</span>: {<span class="hljs-string">"viewCount"</span>: 3} }
)
</code></pre>
<p>删除文档的命令：</p>
<pre class="highlighter-hljs" highlighted="true" has-selection="true"><code class="highlighter-hljs hljs language-csharp">db.book.<span class="hljs-keyword">remove</span>({<span class="hljs-string">"_id"</span>:
     ObjectId(<span class="hljs-string">"5c612b2f15338f68639e67d5"</span>)})
</code></pre>
<p>在传统的SQL语法中，可以限定返回的字段，MongoDB可以使用Projection来表示：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-lua">db.book.<span class="hljs-built_in">find</span>({<span class="hljs-string">"author"</span>: <span class="hljs-string">"James"</span>}, 
    {<span class="hljs-string">"_id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"title"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"author"</span>: <span class="hljs-number">1</span>})
</code></pre>
<p>实现简单的分页查询：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-scss">db<span class="hljs-selector-class">.book</span><span class="hljs-selector-class">.find</span>({})
    <span class="hljs-selector-class">.sort</span>({"viewCount" : -<span class="hljs-number">1</span>})
    <span class="hljs-selector-class">.skip</span>(<span class="hljs-number">10</span>)<span class="hljs-selector-class">.limit</span>(<span class="hljs-number">5</span>)
</code></pre>
<p>这种基于BSON/JSON 的语法格式并不复杂，它的表达能力或许要比SQL更加强大。<br>
与 MongoDB 做法类似的还有 ElasticSearch，后者是搜索数据库的佼佼者。</p>
<p>关于文档操作与 SQL方式完整的对比，官方的文档描述得比较详细：<br>
<a href="https://docs.mongodb.com/manual/reference/sql-comparison/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/reference/sql-comparison/</a></p>
<p>那么，一个有趣的问题是 MongoDB 能不能用 SQL进行查询？</p>
<p>当然是可以！</p>
<p>但需要注意这些功能并不是 MongoDB 原生自带的，而需要借由第三方工具平台实现：</p>
<ul>
<li>客户端使用SQL，可以使用 mongobooster、studio3t 这样的工具</li>
<li>服务端的话，可以看看 presto 之类的一些平台..</li>
</ul>
<h2 id="四索引">四、索引<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>无疑，索引是一个数据库的关键能力，MongoDB 支持非常丰富的索引类型。<br>
利用这些索引，可以实现快速的数据查找，而索引的类型和特性则是针对不同的应用场景设计的。</p>
<p>索引的技术实现依赖于底层的存储引擎，在当前的版本中 MongoDB 使用 wiredTiger 作为默认的引擎。<br>
在索引的实现上使用了 B+树的结构，这与其他的传统数据库并没有什么不同。<br>
所以这是个好消息，<strong>大部分基于SQL数据库的一些索引调优技巧在 MongoDB 上仍然是可行的</strong>。</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235107623-326553681.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图-B+树</p>
<p>使用 ensureIndexes 可以为集合声明一个普通的索引：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-css">db<span class="hljs-selector-class">.book</span><span class="hljs-selector-class">.ensureIndex</span>({author: <span class="hljs-number">1</span>})
</code></pre>
<blockquote>
<p>author后面的数字 1 代表升序，如果是降序则是 -1</p>
</blockquote>
<p>实现复合式(compound)的索引，如下：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-haskell"><span class="hljs-title">db</span>.book.ensureIndex({<span class="hljs-class"><span class="hljs-keyword">type</span>: 1, published: 1})</span>
</code></pre>
<blockquote>
<p>只有对于复合式索引时，索引键的顺序才变得有意义</p>
</blockquote>
<p>如果索引的字段是数组类型，该索引就自动成为数组(multikey)索引：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-css">db<span class="hljs-selector-class">.book</span><span class="hljs-selector-class">.ensureIndex</span>({tags: <span class="hljs-number">1</span>})
</code></pre>
<blockquote>
<p>MongoDB 可以在复合索引上包含数组的字段，但最多只能包含一个</p>
</blockquote>
<h3 id="索引特性">索引特性<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>在声明索引时，还可以通过一些参数化选项来为索引赋予一定的特性，包括：</p>
<ul>
<li>unique=true，表示一个唯一性索引</li>
<li>expireAfterSeconds=3600，表示这是一个TTL索引，并且数据将在1小时后老化</li>
<li>sparse=true，表示稀疏的索引，仅索引非空(non-null)字段的文档</li>
<li>partialFilterExpression: { rating: { $gt: 5 }，条件式索引，即满足计算条件的文档才进行索引</li>
</ul>
<h3 id="索引分类">索引分类<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>除了普通索引之外，MongoDB 支持的类型还包括：</p>
<ul>
<li>哈希(HASH)索引，哈希是另一种快速检索的数据结构，MongoDB 的 HASH 类型分片键会使用哈希索引。</li>
<li>地理空间索引，用于支持快速的地理空间查询，如寻找附近1公里的商家。</li>
<li>文本索引，用于支持快速的全文检索</li>
<li>模糊索引(Wildcard Index)，一种基于匹配规则的灵活式索引，在4.2版本开始引入。</li>
</ul>
<h3 id="索引评估调优">索引评估、调优<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>使用 explain() 命令可以用于查询计划分析，进一步评估索引的效果。<br>
如下：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-css">&gt; db<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.explain</span>()<span class="hljs-selector-class">.find</span>( { <span class="hljs-selector-tag">a</span> : <span class="hljs-number">5</span> } )

{
  "queryPlanner" : {
    ...
    "winningPlan" : {
      "stage" : <span class="hljs-string">"FETCH"</span>,
      <span class="hljs-string">"inputStage"</span> : {
        "stage" : <span class="hljs-string">"IXSCAN"</span>,
        <span class="hljs-string">"keyPattern"</span> : {
            "<span class="hljs-selector-tag">a</span>" : <span class="hljs-number">5</span>
        },
        "indexName" : <span class="hljs-string">"a_1"</span>,
        <span class="hljs-string">"isMultiKey"</span> : false,
        <span class="hljs-string">"direction"</span> : <span class="hljs-string">"forward"</span>,
        <span class="hljs-string">"indexBounds"</span> : {"<span class="hljs-selector-tag">a</span>" : [<span class="hljs-string">"[5.0, 5.0]"</span>]}
        }
    }},
   ...
}

</code></pre>
<p>从结果 winningPlan 中可以看出执行计划是否高效，比如：</p>
<ul>
<li>未能命中索引的结果，会显示COLLSCAN</li>
<li>命中索引的结果，使用IXSCAN</li>
<li>出现了内存排序，显示为 SORT</li>
</ul>
<p>关于 explain 的结果说明，可以进一步参考文档：</p>
<p><a href="https://docs.mongodb.com/manual/reference/explain-results/index.html" target="_blank" rel="noopener">https://docs.mongodb.com/manual/reference/explain-results/index.html</a></p>
<h2 id="五集群">五、集群<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>在大数据领域常常提到的4V特征中，Volume(数据量大)是首当其冲被提及的。<br>
由于单机垂直扩展能力的局限，水平扩展的方式则显得更加的靠谱。 MongoDB 自带了这种能力，可以将数据存储到多个机器上以提供更大的容量和负载能力。<br>
此外，同时为了保证数据的高可用，MongoDB 采用副本集的方式来实现数据复制。</p>
<p>一个典型的MongoDB集群架构会同时采用分片+副本集的方式，如下图：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235121473-508176774.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图-MongoDB 分片集群(Shard Cluster)</p>
<p><strong>架构说明</strong></p>
<ul>
<li>
<p>数据分片（Shards）<br>
分片用于存储真正的集群数据，可以是一个单独的 Mongod实例，也可以是一个副本集。 生产环境下Shard一般是一个 Replica Set，以防止该数据片的单点故障。<br>
对于分片集合(sharded collection)来说，每个分片上都存储了集合的一部分数据(按照分片键切分)，如果集合没有分片，那么该集合的数据都存储在数据库的 Primary Shard中。</p>
</li>
<li>
<p>配置服务器（Config Servers）<br>
保存集群的元数据（metadata），包含各个Shard的路由规则，配置服务器由一个副本集(ReplicaSet)组成。</p>
</li>
<li>
<p>查询路由（Query Routers）<br>
Mongos是 Sharded Cluster 的访问入口，其本身并不持久化数据 。Mongos启动后，会从 Config Server 加载元数据，开始提供服务，并将用户的请求正确路由到对应的Shard。<br>
Sharding 集群可以部署多个 Mongos 以分担客户端请求的压力。</p>
</li>
</ul>
<h3 id="分片机制">分片机制<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>下面的几个细节，对于理解和应用 MongoDB 的分片机制比较重要，所以有必要提及一下：</p>
<p><strong>1. 数据如何切分</strong></p>
<p>首先，基于分片切分后的数据块称为 chunk，一个分片后的集合会包含多个 chunk，每个 chunk 位于哪个分片(Shard) 则记录在 Config Server(配置服务器)上。<br>
Mongos 在操作分片集合时，会自动根据分片键找到对应的 chunk，并向该 chunk 所在的分片发起操作请求。</p>
<p><strong>数据是根据分片策略来进行切分的，而分片策略则由 分片键(ShardKey)+分片算法(ShardStrategy)组成。</strong></p>
<p>MongoDB 支持两种分片算法：</p>
<ul>
<li>范围分片</li>
</ul>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20180313215414431-1794878366.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>如上图所示，假设集合根据x字段来分片，x的取值范围为[minKey, maxKey]（x为整型，这里的minKey、maxKey为整型的最小值和最大值），将整个取值范围划分为多个chunk，每个chunk（默认配置为64MB）包含其中一小段的数据：<br>
如Chunk1包含x的取值在[minKey, -75)的所有文档，而Chunk2包含x取值在[-75, 25)之间的所有文档...</p>
<p>范围分片能很好的满足<strong>范围查询</strong>的需求，比如想查询x的值在[-30, 10]之间的所有文档，这时 Mongos 直接能将请求路由到 Chunk2，就能查询出所有符合条件的文档。 范围分片的缺点在于，如果 ShardKey 有明显递增（或者递减）趋势，则新插入的文档多会分布到同一个chunk，无法扩展写的能力，比如使用_id作为 ShardKey，而MongoDB自动生成的id高位是时间戳，是持续递增的。</p>
<ul>
<li>哈希分片</li>
</ul>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20180313215452408-135734433.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>Hash分片是根据用户的 ShardKey 先计算出hash值（64bit整型），再根据hash值按照<strong>范围分片</strong>的策略将文档分布到不同的 chunk。<br>
由于 hash值的计算是随机的，因此 Hash 分片具有很好的离散性，可以将数据随机分发到不同的 chunk 上。 Hash 分片可以充分的扩展写能力，弥补了范围分片的不足，但不能高效的服务范围查询，所有的范围查询要查询多个 chunk 才能找出满足条件的文档。</p>
<p><strong>2. 如何保证均衡</strong></p>
<p>如前面的说明中，数据是分布在不同的 chunk上的，而 chunk 则会分配到不同的分片上，那么如何保证分片上的 数据(chunk) 是均衡的呢？<br>
在真实的场景中，会存在下面两种情况：</p>
<ul>
<li>
<p>A. 全预分配，chunk 的数量和 shard 都是预先定义好的，比如 10个shard，存储1000个chunk，那么每个shard 分别拥有100个chunk。<br>
此时集群已经是均衡的状态(这里假定)</p>
</li>
<li>
<p>B. 非预分配，这种情况则比较复杂，一般当一个 chunk 太大时会产生分裂(split)，不断分裂的结果会导致不均衡；或者动态扩容增加分片时，也会出现不均衡的状态。 这种不均衡的状态由集群均衡器进行检测，一旦发现了不均衡则执行 chunk数据的搬迁达到均衡。</p>
</li>
</ul>
<p>MongoDB 的数据均衡器运行于 Primary Config Server(配置服务器的主节点)上，而该节点也同时会控制 Chunk 数据的搬迁流程。</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20180313215634205-450783831.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图-数据自动均衡</p>
<p>对于数据的不均衡是根据两个分片上的 Chunk 个数差异来判定的，阈值对应表如下：</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Number of Chunks</th>
<th>Migration Threshold</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fewer than 20</td>
<td>2</td>
</tr>
<tr>
<td>20-79</td>
<td>4</td>
</tr>
<tr>
<td>80 and greater</td>
<td>8</td>
</tr>
</tbody>
</table></div>
<p>MongoDB 的数据迁移对集群性能存在一定影响，这点无法避免，目前的规避手段只能是将<a href="https://docs.mongodb.com/manual/tutorial/manage-sharded-cluster-balancer/#sharding-schedule-balancing-window" target="_blank" rel="noopener">均衡窗口</a>对齐到业务闲时段。</p>
<p><strong>3. 应用高可用</strong></p>
<p>应用节点可以通过同时连接多个 Mongos 来实现高可用，如下：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235137136-1930411436.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图- mongos 高可用</p>
<p>当然，连接高可用的功能是由 Driver 实现的。</p>
<h3 id="副本集">副本集<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>副本集又是另一个话题，实质上除了前面架构图所体现的，副本集可以作为 Shard Cluster 中的一个Shard(片)之外，对于规模较小的业务来说，也可以使用一个单副本集的方式进行部署。<br>
MongoDB 的副本集采取了一主多从的结构，即一个Primary Node + N* Secondary Node的方式，数据从主节点写入，并复制到多个备节点。</p>
<p>典型的架构如下：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20180313214746630-2040647850.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>利用副本集，我们可以实现：：</p>
<ul>
<li>数据库高可用，主节点宕机后，由备节点自动选举成为新的主节点；</li>
<li>读写分离，读请求可以分流到备节点，减轻主节点的单点压力。</li>
</ul>
<p>请注意，读写分离只能增加集群"读"的能力，对于写负载非常高的情况却无能为力。<br>
对此需求，使用分片集群并增加分片，或者提升数据库节点的磁盘IO、CPU能力可以取得一定效果。</p>
<p><strong>选举</strong></p>
<p>MongoDB 副本集通过 Raft 算法来完成主节点的选举，这个环节在初始化的时候会自动完成，如下面的命令：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-objectivec">config = {
    _<span class="hljs-keyword">id</span> : <span class="hljs-string">"my_replica_set"</span>,
    members : [
        {_<span class="hljs-keyword">id</span> : <span class="hljs-number">0</span>, host : <span class="hljs-string">"rs1.example.net:27017"</span>},
        {_<span class="hljs-keyword">id</span> : <span class="hljs-number">1</span>, host : <span class="hljs-string">"rs2.example.net:27017"</span>},
        {_<span class="hljs-keyword">id</span> : <span class="hljs-number">2</span>, host : <span class="hljs-string">"rs3.example.net:27017"</span>},
  ]
}
rs.initiate(config)
</code></pre>
<p>initiate 命令用于实现副本集的初始化，在选举完成后，通过 isMaster()命令就可以看到选举的结果：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-javascript">&gt; db.<span class="hljs-title function_">isMaster</span>(<span class="hljs-params"></span>)

{
    <span class="hljs-string">"hosts"</span> : [
    <span class="hljs-string">"192.168.100.1:27030"</span>,
    <span class="hljs-string">"192.168.100.2:27030"</span>,
    <span class="hljs-string">"192.168.100.3:27030"</span>
    ],
    <span class="hljs-string">"setName"</span> : <span class="hljs-string">"myReplSet"</span>,
    <span class="hljs-string">"setVersion"</span> : <span class="hljs-number">1</span>,
    <span class="hljs-string">"ismaster"</span> : <span class="hljs-literal">true</span>,
    <span class="hljs-string">"secondary"</span> : <span class="hljs-literal">false</span>,
    <span class="hljs-string">"primary"</span> : <span class="hljs-string">"192.168.100.1:27030"</span>,
    <span class="hljs-string">"me"</span> : <span class="hljs-string">"192.168.100.1:27030"</span>,
    <span class="hljs-string">"electionId"</span> : <span class="hljs-title class_">ObjectId</span>(<span class="hljs-string">"7fffffff0000000000000001"</span>),
    <span class="hljs-string">"ok"</span> : <span class="hljs-number">1</span>
}
</code></pre>
<p>受 Raft算法的影响，主节点的选举需要满足"大多数"原则，可以参考下表：</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>投票成员数</th>
<th>大多数</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
</tr>
</tbody>
</table></div>
<p>因此，为了避免出现平票的情况，副本集的部署一般采用是基数个节点，比如3个，正所谓三人行必有我师..</p>
<p><strong>心跳</strong></p>
<p>在高可用的实现机制中，心跳(heartbeat)是非常关键的，判断一个节点是否宕机就取决于这个节点的心跳是否还是正常的。<br>
副本集中的每个节点上都会定时向其他节点发送心跳，以此来感知其他节点的变化，比如是否失效、或者角色发生了变化。<br>
利用心跳，MongoDB 副本集实现了自动故障转移的功能，如下图：</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20180313214956548-1867816349.png" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>默认情况下，节点会每2秒向其他节点发出心跳，这其中包括了主节点。 如果备节点在10秒内没有收到主节点的响应就会主动发起选举。<br>
此时新一轮选举开始，新的主节点会产生并接管原来主节点的业务。 整个过程对于上层是透明的，应用并不需要感知，因为 Mongos 会自动发现这些变化。<br>
如果应用仅仅使用了单个副本集，那么就会由 Driver 层来自动完成处理。</p>
<p><strong>复制</strong></p>
<p>主节点和备节点的数据是通过日志(oplog)复制来实现的，这很类似于 mysql 的 binlog。<br>
在每一个副本集的节点中，都会存在一个名为local.oplog.rs的特殊集合。 当 Primary 上的写操作完成后，会向该集合中写入一条oplog，<br>
而 Secondary 则持续从 Primary 拉取新的 oplog 并在本地进行回放以达到同步的目的。</p>
<p>下面，看看一条 oplog 的具体形式：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-css">{
"ts" : <span class="hljs-built_in">Timestamp</span>(<span class="hljs-number">1446011584</span>, <span class="hljs-number">2</span>),
<span class="hljs-string">"h"</span> : <span class="hljs-built_in">NumberLong</span>(<span class="hljs-string">"1687359108795812092"</span>),
<span class="hljs-string">"v"</span> : <span class="hljs-number">2</span>,
<span class="hljs-string">"op"</span> : <span class="hljs-string">"i"</span>,
<span class="hljs-string">"ns"</span> : <span class="hljs-string">"test.nosql"</span>,
<span class="hljs-string">"o"</span> : { "_id" : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">"563062c0b085733f34ab4129"</span>), <span class="hljs-string">"name"</span> : <span class="hljs-string">"mongodb"</span>, <span class="hljs-string">"score"</span> : <span class="hljs-string">"100"</span> }
}
</code></pre>
<p>其中的一些关键字段有：</p>
<ul>
<li>ts 操作的 optime，该字段不仅仅包含了操作的时间戳(timestamp)，还包含一个自增的计数器值。</li>
<li>h 操作的全局唯一表示</li>
<li>v oplog 的版本信息</li>
<li>op 操作类型，比如 i=insert,u=update..</li>
<li>ns 操作集合，形式为 database.collection</li>
<li>o 指具体的操作内容，对于一个 insert 操作，则包含了整个文档的内容</li>
</ul>
<p>MongoDB 对于 oplog 的设计是比较仔细的，比如：</p>
<ul>
<li>oplog 必须保证有序，通过 optime 来保证。</li>
<li>oplog 必须包含能够进行数据回放的完整信息。</li>
<li>oplog 必须是幂等的，即多次回放同一条日志产生的结果相同。</li>
<li>oplog 集合是固定大小的，为了避免对空间占用太大，旧的 oplog 记录会被滚动式的清理。</li>
</ul>
<p>有兴趣的读者，可以参考官方文档：</p>
<p><a href="https://docs.mongodb.com/manual/core/replica-set-oplog/index.html" target="_blank" rel="noopener">https://docs.mongodb.com/manual/core/replica-set-oplog/index.html</a></p>
<h2 id="六事务与一致性">六、事务与一致性<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>一直以来，"不支持事务" 是 MongoDB 一直被诟病的问题，当然也可以说这是 NoSQL 数据库的一种权衡(放弃事务，追求高性能、高可扩展)<br>
但实质上，MongoDB 很早就有事务的概念，但是这个事务只能是针对单文档的，即单个文档的操作是有原子性保证的。<br>
在4.0 版本之后，MongoDB 开始支持多文档的事务：</p>
<ul>
<li>4.0 版本支持副本集范围的多文档事务。</li>
<li>4.2 版本支持跨分片的多文档事务(基于两阶段提交)。</li>
</ul>
<p>在事务的隔离性上，MongoDB 支持快照(snapshot)的隔离级别，可以避免脏读、不可重复读和幻读。<br>
尽管有了真正意义上的事务功能，但多文档事务对于性能有一定的影响，应用应该在充分评估后再做选用。</p>
<h3 id="一致性">一致性<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h3>
<p>一致性是一个复杂的话题，而一致性更多从应用角度上提出的，比如：</p>
<pre class="highlighter-hljs" highlighted="true"><code class="highlighter-hljs hljs language-undefined">向系统写入一条数据，应该能够马上读到写入的这个数据。
</code></pre>
<p>在分布式架构的CAP理论以及许多延续的观点中提到，由于网络分区的存在，要求系统在一致性和可用性之间做出选择，而不能两者兼得。</p>
<p><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/242916-20191013235157992-1841212933.jpg" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>图 -CAP理论</p>
<p>在 MongoDB 中，这个选择是可以由开发者来定的。 MongoDB 允许客户端为其操作设定一定的级别或者偏好，包括：</p>
<ul>
<li>read preference<br>
读取偏好，可指定读主节点、读备节点，或者是优先读主、优先读备、取最近的节点</li>
<li>write concern<br>
写关注，指定写入结果达到什么状态时才返回，可以为无应答(none)、应答(ack)，或者是大多数节点完成了数据复制等等</li>
<li>read concern<br>
读关注，指定读取的数据版本处于怎样的状态，可以为读本地、读大多数节点写入，或者是线性读(linearizable)等等。</li>
</ul>
<p>使用不同的设定将会产生对于C(一致性)、A(可用性)的不同的抉择，比如：</p>
<ul>
<li>将读偏好设置为 primary，此时读写都在主节点上。 这保证了数据的一致性，但一旦主节点宕机会导致失败(可用性降低)</li>
<li>将读偏好设置为 secondaryPrefered，此时写主，优先读备，可用性提高了，但数据存在延迟(出现不一致)</li>
<li>将读写关注都设置为 majority(大多数)，一致性提升了，但可用性也同时降低了(节点失效会导致大多数写失败)</li>
</ul>
<p>关于这种权衡的讨论会一直存在，而 MongoDB 除了提供多样化的选择之外，其主要是通过复制、基于心跳的自动failover等机制来降低系统发生故障时产生的影响，从而提升整体的可用性。</p>
<h2 id="小结">小结<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h2>
<p>本文主要揭示了 MongoDB 多个方面的细节，同时在使用体验上也借助 SQL 的概念做了一些对比。<br>
从笔者的角度看，MongoDB 的发展性是很强的，其灵活快速的开发模式、天生自带分布式等能力弥补了传统型SQL数据库的缺陷。当然，目前的 NewSQL 本质上也貌似在以"模仿的方式"弥补这些缺陷。</p>
<p>希望本文的内容对你能有些参考。</p>

</div>
<div id="MySignature" role="contentinfo">
    <div style="background-color: #7c7f7c1c; font-size: small; padding: 5px">
    
	<div style="float: left; padding-right: 15px"> 
	<img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/o_qrcode_for_gh_b2cf486409a0_258.jpg" style="width: 120px; height: 120px">
	</div>
	
	<div style="padding-top: 15px">
	<p>
            作者： 
            <a href="http://www.cnblogs.com/littleatp/">美码师(zale)</a>
    </p>
    <p>
            出处：
            <a href="http://www.cnblogs.com/littleatp/">http://www.cnblogs.com/littleatp/</a>, 如果喜欢我的文章，请<b style="font-size: medium">关注我的公众号</b>
    </p>

    <p>
             本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出
             <a href="https://www.cnblogs.com/littleatp/p/11675233.html#" style="color: #0; font-size: medium">原文链接</a>
             &nbsp;如有问题， 可留言咨询.
    </p>

    </div>
	<div style="clear: both"></div>
    
</div>
</div>
<div class="clear"></div>
<div id="blog_post_info_block" role="contentinfo">


<div id="BlogPostCategory">
    分类: 
            <a href="https://www.cnblogs.com/littleatp/category/669826.html" target="_blank">1.架构设计</a>
,             <a href="https://www.cnblogs.com/littleatp/category/1209630.html" target="_blank">5.数据库中间件</a>
</div>
<div id="EntryTag">
    标签: 
            <a href="https://www.cnblogs.com/littleatp/tag/mongodb/">mongodb</a>
</div>
    <div id="blog_post_info">
<div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(11675233,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
        <a id="green_channel_follow" onclick="follow(&#39;14b7cf8b-2d08-e011-ac81-842b2b196315&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareManager.wechatShare()"><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/littleatp/" target="_blank"><img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/20180527184904.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/littleatp/">美码师</a>
                <img class="post-footer-vip-logo" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/vip.png" title="博客园VIP会员">
            <br>
            <a href="https://home.cnblogs.com/u/littleatp/followers/">粉丝 - <span class="follower-count">150</span></a>
            <a href="https://home.cnblogs.com/u/littleatp/followees/">关注 - <span class="following-count">10</span></a><br>
                <a href="https://cnblogs.vip/" target="_blank">会员号：931</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow" class="follow-tip">
                <a href="javascript:void(0);" onclick="follow(&#39;14b7cf8b-2d08-e011-ac81-842b2b196315&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(11675233,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">10</span>
    </div>
    <div class="buryit" onclick="votePost(11675233,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>

<script type="text/javascript">
    currentDiggType = 0;
</script>
</div>
    <div class="clear"></div>
    <div id="post_next_prev">

    <a href="https://www.cnblogs.com/littleatp/p/11515458.html" class="p_n_p_prefix">« </a> 上一篇：    <a href="https://www.cnblogs.com/littleatp/p/11515458.html" data-featured-image="" title="发布于 2019-09-12 22:36">Reactive(3)5分钟理解 SpringBoot 响应式的核心-Reactor</a>
    <br>
    <a href="https://www.cnblogs.com/littleatp/p/11707952.html" class="p_n_p_prefix">» </a> 下一篇：    <a href="https://www.cnblogs.com/littleatp/p/11707952.html" data-featured-image="" title="发布于 2019-10-20 16:17">是什么造成了数据库的卡顿</a>

</div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="1451.5268022368357" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2019-10-15 21:19" aria-expanded="false">2019-10-15 07:40</span>&nbsp;
<a href="https://www.cnblogs.com/littleatp/">美码师</a>&nbsp;
阅读(<span id="post_view_count">13413</span>)&nbsp;
评论(<span id="post_comment_count">6</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=11675233" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(11675233);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: &#39;&#39;, targetType: &#39;blogPost&#39;, targetId: &#39;11675233&#39;, targetLink: &#39;https://www.cnblogs.com/littleatp/p/11675233.html&#39;, title: &#39;了解 MongoDB 看这一篇就够了&#39; })">举报</a>
</div>
        </div>
        <script>
    var cb_entryId = 11675233, cb_entryCreatedDate = '2019-10-15 07:40', cb_postType = 1, cb_postTitle = '了解 MongoDB 看这一篇就够了';
    var allowComments = true, cb_blogId = 129222, cb_blogApp = 'littleatp', cb_blogUserGuid = '14b7cf8b-2d08-e011-ac81-842b2b196315';
    mermaidRender.render()
    markdown_highlight()
    zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");    
</script>
        <a id="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav">
            <a class="comment-nav-left" href="https://www.cnblogs.com/cmt/p/17520031.html" target="_blank">弹尽粮绝，会员救园：会员上线，命悬一线</a>
        <div class="comment-nav-right">
            <span id="span_refresh_tips"></span><a href="https://www.cnblogs.com/littleatp/p/11675233.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/littleatp/p/11675233.html#top">返回顶部</a>
        </div>
    </div>
    <div id="comment_form_container"><div class="login_tips">
    登录后才能查看或发表评论，立即 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return account.login(&#39;!comments&#39;);">登录</a> 或者
    <a href="https://www.cnblogs.com/">逛逛</a> 博客园首页
</div>
</div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
        <div id="cnblogs_ch"></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="under-post-card">
            <div id="div-gpt-ad-1592365906576-0" style="width: 300px; height: 250px;"><iframe id="google_ads_iframe_/1090369/C1_1" width="0" height="0" data-load-complete="true" data-google-container-id="true" sandbox="" style="position: absolute; width: 0px; height: 0px; left: 0px; right: 0px; z-index: -1; border: 0px;" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/saved_resource.html"></iframe></div>
    </div>
    <div id="under_post_card1"><div class="under-post-card">
<b>编辑推荐：</b>
<br>

· <a href="https://www.cnblogs.com/tcjiaan/p/17742167.html" target="_blank">［ASP.NET Core］在 Mini-API 中注入服务</a>
    <br>
· <a href="https://www.cnblogs.com/Chang-LeHung/p/17741876.html" target="_blank">深入理解 python 虚拟机：生成器停止背后的魔法</a>
    <br>
· <a href="https://www.cnblogs.com/eventhorizon/p/17729014.html" target="_blank">使用 OpenTelemetry 构建 .NET 应用可观测性：.NET SDK 概览</a>
    <br>
· <a href="https://www.cnblogs.com/zenghanxi/p/17730088.html" target="_blank">一个混乱千万级软件项目</a>
    <br>
· <a href="https://www.cnblogs.com/tangshiye/p/17726282.html" target="_blank">新零售 SaaS 架构：面向中小连锁的 SaaS 系统整体规划</a>
    <br>
</div></div>
    <div id="under_post_card2"><div class="itnews under-post-card">
    <b>阅读排行：</b>
    <br>
 ·          <a href="https://www.cnblogs.com/tianqing/p/17742818.html" target="_blank">关于Async、Await的一些知识点</a>
        <br>
 ·          <a href="https://www.cnblogs.com/zhiyiYo/p/17742194.html" target="_blank">QFluentWidgets: 基于 C++ Qt 的 Fluent Design 组件库</a>
        <br>
 ·          <a href="https://www.cnblogs.com/one-xiaoqiang/p/17743078.html" target="_blank">传统的MVC开发模式和前后端分离开发模式</a>
        <br>
 ·          <a href="https://www.cnblogs.com/one-xiaoqiang/p/17742053.html" target="_blank">AOP（面向切面编程）</a>
        <br>
 ·          <a href="https://www.cnblogs.com/tcjiaan/p/17742167.html" target="_blank">【ASP.NET Core】在 Mini-API 中注入服务</a>
        <br>
</div></div>
    <div id="HistoryToday" class="under-post-card"></div>
    <script type="text/javascript">
        var commentManager = new blogCommentManager();
        commentManager.renderComments(0);
        fixPostBody();
        window.footnoteTipManager.generateFootnoteTips();

            window.tocManager.displayDisableTocTips = false;
            window.tocManager.generateToc();
            
                setTimeout(function() { countViews(cb_blogId, cb_entryId); }, 50);
            
            deliverT2();
            deliverC1C2();
            loadNewsAndKb();
            
                LoadPostCategoriesTags(cb_blogId, cb_entryId);
            
            LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
            GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
            loadOptUnderPost();
            GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
                </script>
</div>

    </div>
</div>
            </div>
        </div>

        <div id="sideBar">
            <div id="sideBarMain">
                <div id="sidebar_news" class="newsItem">
    
<h3 class="catListTitle">公告</h3>
<div id="blog-news">    
    <div id="sidebar_news_content"><div style="background-color: #7c7f7c1c; font-size: small; padding: 5px;">
    
	<div style="float:left; padding-right:15px;"> 
	<img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/o_qrcode_for_gh_b2cf486409a0_258.jpg" style="width:120px; height:120px;">
	</div>

      <div style="padding-top:2px">
        <p>
             <b style="font-size:medium">美码师</b>，老码农一枚，
            喜欢聊聊代码，唠唠职场故事，爱技术也爱生活<br>
           欢迎关注我的公众号

        </p>
       </div>

	<div style="clear:both"></div>
</div>


<div style="background-color: #7c7f7c1c; font-size: small; padding: 5px;">

    <div style="float:left; padding:3px;"> 
       <a href="https://item.jd.com/13214932.html" target="_blank">
	     <img width="200" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/o_210613150152书封面.png">
	   </a>
   </div>
   
   <div style="clear:both"></div>
</div>


<div style="background-color: #7c7f7c1c; font-size: small; padding: 5px;">
    <div style="float:left; padding-right:1px;"> 
    </div>

    <div style="clear:both"></div>
</div>
<div id="profile_block">
    昵称：
    <a href="https://home.cnblogs.com/u/littleatp/">
        美码师
    </a>
        <img class="sidebar-vip-logo" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/vip.png" title="博客园VIP会员">
    <br>
    园龄：
    <a href="https://home.cnblogs.com/u/littleatp/" title="入园时间：2010-12-15">
        12年9个月
    </a>
    <br>
    粉丝：
    <a class="follower-count" href="https://home.cnblogs.com/u/littleatp/followers/">
        150
    </a>
    <br>
    关注：
    <a class="folowing-count" href="https://home.cnblogs.com/u/littleatp/followees/">
        10
    </a>
    <div id="p_b_follow" class="follow-tip">
<a href="javascript:void(0)" onclick="follow(&#39;14b7cf8b-2d08-e011-ac81-842b2b196315&#39;)">+加关注</a></div>
    <script>getFollowStatus('14b7cf8b-2d08-e011-ac81-842b2b196315');</script>
</div>
</div>
</div>
<script>loadBlogNews();</script> 
</div>
<div id="sidebar_c3"></div>
                <div id="calendar"><div id="blog-calendar" style="">

<table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar" border="0">
    <tbody>
        <tr>
            <td colspan="7">
                <table class="CalTitle" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2023/09/06&#39;); return false;">&lt;</a>
                            </td>
                            <td align="center">2023年10月</td>
                            <td align="right" class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2023/11/06&#39;); return false;">&gt;</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    <tr>
        <th class="CalDayHeader" align="center" abbr="日" scope="col">日</th>
        <th class="CalDayHeader" align="center" abbr="一" scope="col">一</th>
        <th class="CalDayHeader" align="center" abbr="二" scope="col">二</th>
        <th class="CalDayHeader" align="center" abbr="三" scope="col">三</th>
        <th class="CalDayHeader" align="center" abbr="四" scope="col">四</th>
        <th class="CalDayHeader" align="center" abbr="五" scope="col">五</th>
        <th class="CalDayHeader" align="center" abbr="六" scope="col">六</th>
    </tr>
            <tr>
                        <td class="CalWeekendDay" align="center">
                            1
                        </td>
                        <td class="" align="center">
                            2
                        </td>
                        <td class="" align="center">
                            3
                        </td>
                        <td class="" align="center">
                            4
                        </td>
                        <td class="" align="center">
                            5
                        </td>
                        <td class="CalTodayDay" align="center">
                            6
                        </td>
                    <td class="CalWeekendDay" align="center">
                        7
                    </td>
            </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            8
                        </td>
                            <td class="" align="center">
                                9
                            </td>
                            <td class="" align="center">
                                10
                            </td>
                            <td class="" align="center">
                                11
                            </td>
                            <td class="" align="center">
                                12
                            </td>
                            <td class="" align="center">
                                13
                            </td>
                        <td class="CalWeekendDay" align="center">
                            14
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            15
                        </td>
                            <td class="" align="center">
                                16
                            </td>
                            <td class="" align="center">
                                17
                            </td>
                            <td class="" align="center">
                                18
                            </td>
                            <td class="" align="center">
                                19
                            </td>
                            <td class="" align="center">
                                20
                            </td>
                        <td class="CalWeekendDay" align="center">
                            21
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            22
                        </td>
                            <td class="" align="center">
                                23
                            </td>
                            <td class="" align="center">
                                24
                            </td>
                            <td class="" align="center">
                                25
                            </td>
                            <td class="" align="center">
                                26
                            </td>
                            <td class="" align="center">
                                27
                            </td>
                        <td class="CalWeekendDay" align="center">
                            28
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            29
                        </td>
                            <td class="" align="center">
                                30
                            </td>
                            <td class="" align="center">
                                31
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                1
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                2
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                3
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            4
                        </td>
                </tr>
                <tr>
                        <td class="CalOtherMonthDay" align="center">
                            5
                        </td>
                            <td class="CalOtherMonthDay" align="center">
                                6
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                7
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                8
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                9
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                10
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            11
                        </td>
                </tr>
    </tbody>
</table></div></div>                
                <script>loadBlogDefaultCalendar();</script>
                <div id="leftcontentcontainer">
                    <!-- begin:SingleColumn -->
                    <div id="blog-sidecolumn"><!-- 搜索 -->
<div id="sidebar_search" class="sidebar-block">
    <div id="sidebar_search" class="mySearch">
        <h3 class="catListTitle">搜索</h3>
        <div id="sidebar_search_box">
            <div id="widget_my_zzk" class="div_my_zzk">
                <input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk">
            </div>
            
        </div>
    </div>
</div>

<!-- 常用链接 -->
<div id="sidebar_shortcut" class="sidebar-block">
<h3 class="catListTitle">
常用链接
</h3>
<ul>
    <li><a href="https://www.cnblogs.com/littleatp/p/" title="我的博客的随笔列表">我的随笔</a></li>
<li><a href="https://www.cnblogs.com/littleatp/MyComments.html" title="我的发表过的评论列表">我的评论</a></li>
<li><a href="https://www.cnblogs.com/littleatp/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li>
<li><a href="https://www.cnblogs.com/littleatp/comments" title="我的博客的评论列表">最新评论</a></li>
<li><a href="https://www.cnblogs.com/littleatp/tag/" title="我的博客的标签列表">我的标签</a></li>

</ul>
</div>

<!-- 最新随笔 -->


<!-- 我的标签 -->


<!-- 积分与排名 -->


<!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
<div id="sidebar_categories">

    <div class="catList">
        <h3 class="catListTitle">
            
合集


        </h3>
        <ul>
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/collections/4970" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="nofollow noopener noreferrer" target="">工作杂谈(2)</a>

                    
                </li>
                                        
        </ul>
    </div>    <div class="catListPostCategory">
        <h3 class="catListTitle">
            
    <a class="sidebar-card-title-a" href="https://www.cnblogs.com/littleatp/post-categories">随笔分类</a>



        </h3>
        <ul>
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/668815.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">0.JAVA技术(45)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/669826.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">1.架构设计(10)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/883134.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2.安全技术(9)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/668820.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">3.前端技术(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/1285914.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">4.测试技术(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/1209630.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">5.数据库中间件(32)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/669791.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">7.工具技巧(9)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/900626.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">8.构建技术(5)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/969980.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">9.基础原理(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/1285909.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">O.开放平台(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/898606.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">P.行业相关(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/category/669793.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">Z.心得杂谈(13)</a>

                    
                </li>
                                        
        </ul>
    </div>    <div class="catListPostArchive">
        <h3 class="catListTitle">
            
随笔档案


        </h3>
        <ul>
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2023/08.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2023年8月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2020/12.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2020年12月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/12.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年12月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/11.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年11月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/10.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年10月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/09.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年9月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/08.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年8月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/07.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年7月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/05.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年5月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/04.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年4月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/03.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年3月(7)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2019/02.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2019年2月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/12.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年12月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/11.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年11月(6)</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/09.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年9月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/08.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年8月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/07.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年7月(8)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/06.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年6月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/05.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年5月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/03.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年3月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2018/02.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2018年2月(5)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2017/10.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年10月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2017/08.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年8月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2017/06.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年6月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2017/03.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年3月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2017/02.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年2月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2017/01.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2017年1月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2016/12.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年12月(5)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2016/11.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年11月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2016/10.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年10月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2016/09.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年9月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2016/08.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年8月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2016/04.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2016年4月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/12.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年12月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/09.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年9月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/08.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年8月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/07.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年7月(4)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/06.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年6月(1)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/04.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年4月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2015/03.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2015年3月(3)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2011/11.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2011年11月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2011/10.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2011年10月(2)</a>

                    
                </li>
                                            <li data-category-list-item-visible="false" style="display: none">
                    
<a href="https://www.cnblogs.com/littleatp/archive/2011/09.html" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="" target="">2011年9月(5)</a>

                    
                </li>
                                        <li><a href="javascript:void(0)" onclick="sideColumnManager.loadMore(this)">更多</a></li>
        </ul>
    </div>    <div class="catList">
        <h3 class="catListTitle">
            
links


        </h3>
        <ul>
                <li data-category-list-item-visible="true" style="display: block">
                    
<a href="http://patorjk.com/software/taag/#p=display&amp;h=1&amp;v=1&amp;f=Doom&amp;t=IOCM" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="nofollow noopener noreferrer" target="">ascii艺术字</a>

                    
                </li>
                                            <li data-category-list-item-visible="true" style="display: block">
                    
<a href="http://asciiflow.com/" style="--cnb-category-item-link-indent-size: calc(0 * 1em)" class="category-item-link" rel="nofollow noopener noreferrer" target="">ascii 图表</a>

                    
                </li>
                                        
        </ul>
    </div></div>

<!-- 最新评论 -->
<!-- 阅读排行榜 -->
<div id="sidebar_topviewedposts" class="sidebar-block">
<div id="topview_posts_wrap">
    <h3 class="catListTitle">
        <a href="https://www.cnblogs.com/littleatp/most-viewed" class="sidebar-card-title-a">
    阅读排行榜
</a>

    </h3>
    <div id="TopViewPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/5878763.html">
                            1. 使用 openssl 生成证书(93584)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/4612896.html">
                            2. mysql 索引过长1071-max key length is 767 byte(80803)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/4815921.html">
                            3. Java条形码生成技术-Barcode4j(62038)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/8563273.html">
                            4. mongodb分布式集群搭建手记(45037)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/5922362.html">
                            5. 使用keytool 生成证书(43401)
                        </a>
                    </li>
        </ul>
    </div>
</div></div>

<!-- 评论排行榜 -->
<div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
    <h3 class="catListTitle">
        <a href="https://www.cnblogs.com/littleatp/most-commented" class="sidebar-card-title-a">评论排行榜</a>

    </h3>
    <div id="TopFeedbackPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/10372599.html">
                            1. 情人节，送女友一桶代码可否？(36)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/9653019.html">
                            2. 软能力那点事，你知多少(18)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/11331649.html">
                            3. 为什么我不喜欢数据库三范式(15)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/10587932.html">
                            4. 老兵的十年职场之路(一)(9)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/littleatp/p/11782883.html">
                            5. MongoDB一次节点宕机引发的思考(源码剖析)(8)
                        </a>
                    </li>
        </ul>
    </div>
</div></div>

<!-- 推荐排行榜 -->
<div id="sidebar_topdiggedposts" class="sidebar-block">
<div id="topdigg_posts_wrap">
    <div class="catListView">
        <h3 class="catListTitle">
            <a href="https://www.cnblogs.com/littleatp/most-liked" class="sidebar-card-title-a">推荐排行榜</a>

        </h3>
        <div id="TopDiggPostsBlock">
            <ul style="word-break: break-all">
                        <li>
                            <a href="https://www.cnblogs.com/littleatp/p/9653019.html">
                                1. 软能力那点事，你知多少(17)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/littleatp/p/10372599.html">
                                2. 情人节，送女友一桶代码可否？(16)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/littleatp/p/11782883.html">
                                3. MongoDB一次节点宕机引发的思考(源码剖析)(10)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/littleatp/p/11675233.html">
                                4. 了解 MongoDB 看这一篇就够了(10)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/littleatp/p/10807130.html">
                                5. 回顾下自己都写了什么(9)
                            </a>
                        </li>
            </ul>
        </div>
    </div>
</div></div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap" class="RecentComment">
    <h3 class="catListTitle"><a href="https://www.cnblogs.com/littleatp/comments" class="sidebar-card-title-a">最新评论</a></h3>    
    <div class="RecentCommentBlock">
        <ul>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/littleatp/p/17643449.html">1. Re:论开会的艺术</a></li>
                <li class="recent_comment_body">@那年十八岁 👍🏻哈哈...</li>
                <li class="recent_comment_author">--美码师</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/littleatp/p/17643449.html">2. Re:论开会的艺术</a></li>
                <li class="recent_comment_body"><p>还有一种，会开完了。事情还没有拍板</p>
</li>
                <li class="recent_comment_author">--那年十八岁</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/littleatp/p/17596080.html">3. Re:番茄工作法，为何总不奏效</a></li>
                <li class="recent_comment_body">@布兰姥爷 找到自己的节奏很重要 👍...</li>
                <li class="recent_comment_author">--美码师</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/littleatp/p/17596080.html">4. Re:番茄工作法，为何总不奏效</a></li>
                <li class="recent_comment_body"><p>25分钟太短了，我一般设置为40-45分钟</p>
</li>
                <li class="recent_comment_author">--James-yu</li>
                <li class="recent_comment_title"><a href="https://www.cnblogs.com/littleatp/p/17596080.html">5. Re:番茄工作法，为何总不奏效</a></li>
                <li class="recent_comment_body">番茄法对我来说只适用于学习而不是工作 因为工作是有明确目标的，根本不需要分割任务 学习就不同了，很难坚持持续学习 我自己实践下来，学习20分钟，休息20分钟 然后慢慢加时间，加到学习25分钟，再休息2...</li>
                <li class="recent_comment_author">--布兰姥爷</li>
        </ul>
    </div>
</div></div>


</div>
                    <script>loadBlogSideColumn();</script>
                    <!-- end:  SingleColumn -->
                </div>
            </div>
        </div>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <div id="footer">
        <!--done-->
Copyright © 2023 美码师
<br><span id="poweredby">Powered by .NET 7.0 on Kubernetes</span>

    </div>
</div>


    <div id="page_end_html">
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1275182573'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s13.cnzz.com/z_stat.php%3Fid%3D1275182573%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script><span id="cnzz_stat_icon_1275182573"></span><script src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/z_stat.php" type="text/javascript"></script>
    </div>

    <input type="hidden" id="antiforgery_token" value="CfDJ8Eg9kra6YURKsOjJwROiT4vIObwk-AlRiJ4-AvvoLD2uyRNReduFrAc9vAuocXXf9hU28w_USjG1xv3p2VK1loOg1f9W1NYxKkFvmFu7IE7kWsDmG5V71FZ-3UHWKbyd0_t_r50-f4AEZKP2lGUQdqQ">
    <script async="" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-M95P3TTWJZ');
</script>
<script defer="" src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/hm.js"></script>

<div style="z-index: 998; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: none; flex-direction: column; align-items: center; justify-content: center">
<div style="background: #fff;padding: 30px; margin: 30px; border-radius: 16px;">
  <div style="width: 200px; height: 200px; background: rgba(255, 255, 255, 0.8); position: absolute; top: -100px; right: -100px; border-radius: 100px"></div>
  <div style="text-align: center; font-size: 18px; margin-bottom: 10px;">点击右上角即可分享</div>
  <img src="./了解 MongoDB 看这一篇就够了 - 美码师 - 博客园_files/35695-20230906145857937-1471873834.gif" alt="微信分享提示">
</div>   
    </div></body></html>